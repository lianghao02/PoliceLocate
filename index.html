<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <!-- PWA 設置：禁止縮放，全螢幕模式 -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="description" content="警用定位輔助工具，協助快速定位與查詢。">
    <meta name="author" content="LiangHao">
    <title>警用定位助手 | LiangHao Dev</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta property="og:title" content="警用定位助手 | LiangHao Dev">
    <meta property="og:description" content="警用定位輔助工具，協助快速定位與查詢。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lianghao02.github.io/PoliceLocate/">

    <!-- 外部資源使用 CDN，確保載入速度 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Noto+Sans+TC:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1><i class="fa-solid fa-user-shield"></i> 警用定位助手</h1>
    <small>PRO v50.0 | 正式發布版</small>

    <div class="container">
        <div class="main-content">
            <div class="card">
                <div class="hint"><i class="fa-solid fa-wand-magic-sparkles"></i> 貼上整段文字，自動辨識座標與門號</div>
                <textarea id="rawInput" class="smart-area" placeholder="長按貼上... (支援 LINE/簡訊 格式)"></textarea>

                <!-- 新增：貼上與清除按鈕 -->
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button class="btn" style="background: #16a085; flex: 1;" onclick="app.pasteInput()">
                        <i class="fa-solid fa-paste"></i> 貼上
                    </button>
                    <button class="btn" style="background: #95a5a6; flex: 1;" onclick="app.clearInput()">
                        <i class="fa-solid fa-eraser"></i> 清空
                    </button>
                </div>

                <button class="btn btn-main" onclick="app.parse()">
                    <i class="fa-solid fa-bolt"></i> 解析並定位
                </button>

                <div class="input-group">
                    <div class="input-wrapper">
                        <label><i class="fa-solid fa-mobile-screen"></i> 門號</label>
                        <input type="tel" id="phone" class="phone-input" placeholder="09xxxxxxxx" readonly
                            onclick="this.removeAttribute('readonly')">
                    </div>
                </div>

                <!-- 新增：定位請求時間 -->
                <div class="input-group">
                    <div class="input-wrapper">
                        <label><i class="fa-regular fa-clock"></i> 定位請求時間</label>
                        <input type="text" id="reqTime" placeholder="yyyy/MM/dd HH:mm:ss">
                    </div>
                </div>

                <!-- 新增：註冊基地台時間 -->
                <div class="input-group">
                    <div class="input-wrapper">
                        <label><i class="fa-solid fa-tower-cell"></i> 註冊基地台時間</label>
                        <input type="text" id="regTime" placeholder="yyyy/MM/dd HH:mm:ss">
                    </div>
                </div>

                <div class="input-group">
                    <div class="input-wrapper">
                        <label>緯度 (Lat)</label>
                        <input type="number" id="lat" step="any" placeholder="23.xxxxx">
                    </div>
                    <div class="input-wrapper">
                        <label>經度 (Lng)</label>
                        <input type="number" id="lng" step="any" placeholder="120.xxxxx">
                    </div>
                </div>

                <div class="input-group">
                    <div class="input-wrapper">
                        <label>方位角 <span style="font-weight:normal;color:#999;font-size:0.8rem">(0-360)</span></label>
                        <input type="number" id="azi" placeholder="選填">
                    </div>
                </div>

                <div class="action-grid">
                    <button class="btn btn-map" onclick="app.openMap()"><i class="fa-solid fa-map-location-dot"></i>
                        Google
                        Map</button>
                    <button class="btn btn-copy" onclick="app.copy()"><i class="fa-solid fa-copy"></i> 複製資訊</button>
                    <button class="btn btn-tg" onclick="app.share('tg')"><i class="fa-brands fa-telegram"></i>
                        Telegram</button>
                    <button class="btn btn-line" onclick="app.share('line')"><i class="fa-brands fa-line"></i>
                        LINE</button>
                </div>
            </div>

            <div id="map"></div>
        </div>

        <div class="history-sec">
            <div class="hist-head">
                <div class="hist-title">最近查詢</div>
                <button class="btn-clear" onclick="app.clearHistory()"><i class="fa-solid fa-trash-can"></i>
                    清除</button>
            </div>
            <ul id="list"></ul>
        </div>

        <div class="footer">
            System initialized. Version 50.0 Stable<br>
            &copy; 2025 Police Locate Tool. All rights reserved.
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>